<?xml version="1.0"?>
<testCase version="9.5.0.202402062035">
    <general>
        <language>Python</language>
        <xPathVersion>XPATH31</xPathVersion>
    </general>
    <execution>
        <parameters version="9.5.0.202402062035">
            <parameters escape="true">
                <parameters xmlns:pt="http://www.fnfr.com/schemas/parameterTree">
                    <DeviceAndroidName pt:description="Name of Android device">.*S.*</DeviceAndroidName>
                    <DeviceAndroidVersion pt:description="OS version of Android device. Default support: 12">12</DeviceAndroidVersion>
                    <AppiumServerHost pt:description="Appium Server Host. Default: localhost">localhost</AppiumServerHost>
                    <AppiumServerPort pt:description="Appium Server Port. Default: 4723">4723</AppiumServerPort>
                    <VideoURL pt:description="The URL to the video"/>
                    <ADBPath pt:description="The path to ADB"/>
                    <DeviceAndroidID pt:description="Used in ADB command. Required when there are more than one device/emulator, e.g. emulator-5554"/>
                </parameters>
            </parameters>
        </parameters>
    </execution>
    <procedures>
        <item name="main">
            <steps>
                <item guid="606e52e0-477f-4ba2-901c-2b4ee195deda" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Initialize variables and validation</body>
                    </command>
                    <nestedSteps>
                        <item guid="17bd04e5-a581-40d5-a632-2cc8af7b348d" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>ytb_app_pkg = &quot;com.google.android.youtube&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="d1382e33-7b71-4a44-a697-e439094b9cda" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>gset(&apos;ytb_app_pkg&apos;, ytb_app_pkg)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="e4f6a83a-dfa2-4f0f-b8d0-d213365c3bfe" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>fresh_start = True</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="19e29fec-b7b0-467e-9063-356a9780b8a9" action="if" useFieldsInCommand="false">
                            <command>
                                <body>param(&apos;VideoURL&apos;) == &apos;&apos;:</body>
                            </command>
                            <nestedSteps>
                                <item guid="1f51ed8e-f994-4f5b-9d03-35dc27ba8340" action="message" useFieldsInCommand="false">
                                    <command>
                                        <body>Error:Please input the video&apos;s URL</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="none">
                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                </extractorInfo>
                                                <processorInfo ruleType="assert">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                        <expression>True</expression>
                                                        <actionsWhenTrue>
                                                            <item actionId="AbortExecution">
                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                            </item>
                                                        </actionsWhenTrue>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.execution.builtin.exec.MessagePropertyGroup">
                                        <severity inherit="false">Error</severity>
                                        <message inherit="false">Please input the video&apos;s URL</message>
                                    </applicationProperties>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="53f45571-3199-4cbb-9c02-b0905f0a0a4e" action="if" useFieldsInCommand="false">
                            <command>
                                <body>param(&apos;ADBPath&apos;) == &apos;&apos;:</body>
                            </command>
                            <nestedSteps>
                                <item guid="10c57722-4651-423b-ba18-c95f5fe6c6c4" action="message" useFieldsInCommand="false">
                                    <command>
                                        <body>Error:Please input the path to ADB</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="none">
                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                </extractorInfo>
                                                <processorInfo ruleType="assert">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                        <expression>True</expression>
                                                        <actionsWhenTrue>
                                                            <item actionId="AbortExecution">
                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                            </item>
                                                        </actionsWhenTrue>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.execution.builtin.exec.MessagePropertyGroup">
                                        <severity inherit="false">Error</severity>
                                        <message inherit="false">Please input the path to ADB</message>
                                    </applicationProperties>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="8292da2d-7eb4-452e-ad39-1eedfff5ab24" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Assumes always do the clear storage before starting the app</body>
                    </command>
                    <nestedSteps>
                        <item guid="0e7def07-abaf-4c69-8997-a23ec38f2a8f" action="if" useFieldsInCommand="false">
                            <command>
                                <body>fresh_start:</body>
                            </command>
                            <nestedSteps>
                                <item guid="e58b14b4-a89a-4ca8-ba87-8aacba293f96" action="call" useFieldsInCommand="false">
                                    <command>
                                        <body>clean_app_data()</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="query">
                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                        <query>responseLine()</query>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="assert">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                        <expression>value == &quot;Success&quot;</expression>
                                                        <actionsWhenTrue>
                                                            <item actionId="DeclareExecutionIssue">
                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                    <message>Successfully cleaned the Youtube app storage</message>
                                                                </actionProperties>
                                                            </item>
                                                        </actionsWhenTrue>
                                                        <actionsWhenFalse>
                                                            <item actionId="AbortExecution">
                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                            </item>
                                                        </actionsWhenFalse>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="70a2327a-fd6f-4d30-8686-9e77e66e8932" action="open" session="s1" useFieldsInCommand="false">
                    <command>
                        <body>project://appium_control_apps/appium.ffsp</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                        <stepProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        <sessionProperties type="com.spirent.itest.applications.appium.properties.AppiumSessionProperties"/>
                        <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    </applicationProperties>
                </item>
                <item guid="edbfcdb6-7fd1-4e57-91c4-30f9ce1a7cae" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Enable stats for nerds</body>
                    </command>
                    <nestedSteps>
                        <item guid="fa1e071c-4b7b-44b9-a678-8465111dabf2" action="call" useFieldsInCommand="false">
                            <command>
                                <body>activate_youtube_app()</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="7e9b2032-2b8d-46bc-a366-52a59d15f023" action="call" useFieldsInCommand="false">
                            <command>
                                <body>enable_stats_for_nerds(fresh_start=fresh_start)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="d14d90de-f04f-488d-a7bd-b62bd4db7a8d" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Open the video&apos;s URL</body>
                    </command>
                    <nestedSteps>
                        <item guid="6f05b8bf-de05-4459-a4db-a9e2238a52d6" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>video_url = param(&apos;VideoURL&apos;)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="407929f2-8e30-45a2-9149-e0a5877daa8f" action="terminate" session="s1">
                            <command>
                                <body>[ytb_app_pkg]</body>
                            </command>
                            <applicationProperties type="com.spirent.itest.applications.appium.properties.AppIdStepProperties">
                                <AppId>[ytb_app_pkg]</AppId>
                            </applicationProperties>
                        </item>
                        <item guid="f832f234-37e8-4bf9-a221-09bbe16dc069" action="command" session="s1">
                            <command>
                                <body>driver.execute_script(&quot;mobile:deepLink&quot;, {&quot;url&quot;: &quot;[video_url]&quot;, &quot;package&quot;: &quot;[ytb_app_pkg]&quot;})</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>isEmpty()</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="assert">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                <expression>value == &quot;true&quot;</expression>
                                                <actionsWhenFalse>
                                                    <item actionId="DeclareExecutionIssue">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                            <message>Can not open &quot;[video_url]&quot;</message>
                                                        </actionProperties>
                                                    </item>
                                                    <item actionId="FailTest">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                    <item actionId="ExitProcedure">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExitProcedurePropertyGroup"/>
                                                    </item>
                                                </actionsWhenFalse>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="d18b3d92-8428-46fe-9a8b-1ab331825004" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Wait until the video is playing</body>
                            </command>
                            <nestedSteps>
                                <item guid="3feb49b8-cd28-4b79-b90b-6fee201741c3" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>xpath_to_progress_loading = &apos;//android.widget.ProgressBar[@resource-id=&quot;com.google.android.youtube:id/player_loading_view_thin&quot;]&apos;</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="84198fc9-c198-486a-8e3d-d408e1472d87" action="for" useFieldsInCommand="false">
                                    <command>
                                        <body>i in range(0, 15):</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="882b9bfb-244d-4579-bd82-9392799918e3" action="command" session="s1" estimatedStepExecutionTime="1.662">
                                            <command>
                                                <body>driver.find_element(By.XPATH, &apos;[xpath_to_progress_loading]&apos;)</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="contains">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                                                <searchString>Traceback (most recent call last):</searchString>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="assert">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                <expression>value == 1</expression>
                                                                <actionsWhenTrue>
                                                                    <item actionId="Break">
                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                    </item>
                                                                </actionsWhenTrue>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="c0a99c2d-3fb0-4502-bf46-abaa7cbf0570" action="command" session="s1" useFieldsInCommand="false">
                                            <command>
                                                <body>time.sleep(1.5)</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="e1c36f9b-8fbd-4841-a137-74deabf4c488" action="else" useFieldsInCommand="false">
                                    <nestedSteps>
                                        <item guid="18b008c1-5cd9-4c9c-b289-cc3d1ecd3457" action="message" useFieldsInCommand="false">
                                            <command>
                                                <body>Error:Timed out waiting for the video loading</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="none">
                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="assert">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                <expression>True</expression>
                                                                <actionsWhenTrue>
                                                                    <item actionId="FailTest">
                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                    </item>
                                                                    <item actionId="ExitExecution">
                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                    </item>
                                                                </actionsWhenTrue>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.fnfr.svt.execution.builtin.exec.MessagePropertyGroup">
                                                <severity inherit="false">Error</severity>
                                                <message inherit="false">Timed out waiting for the video loading</message>
                                            </applicationProperties>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="1c87db87-84c8-4315-aaab-de1ab655ec86" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Check if the video&apos;s URL is valid</body>
                            </command>
                            <nestedSteps>
                                <item guid="edd34a43-7cdf-4098-8d09-fd2daa5e4ccf" action="command" session="s1" useFieldsInCommand="false">
                                    <command>
                                        <body>driver.find_element(By.XPATH, &apos;//android.widget.TextView[contains(@text, &quot;This video is unavailable&quot;)]&apos;)</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="contains">
                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                                        <searchString>Traceback (most recent call last):</searchString>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="assert">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                        <expression>value == 1</expression>
                                                        <actionsWhenTrue>
                                                            <item actionId="DeclareExecutionIssue">
                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                    <message>Successfully opened the video</message>
                                                                </actionProperties>
                                                            </item>
                                                        </actionsWhenTrue>
                                                        <actionsWhenFalse>
                                                            <item actionId="DeclareExecutionIssue">
                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                    <message>The URL is invalid</message>
                                                                </actionProperties>
                                                            </item>
                                                            <item actionId="FailTest">
                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                            </item>
                                                            <item actionId="ExitExecution">
                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                            </item>
                                                        </actionsWhenFalse>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="f78a01da-e9ee-4c68-95a3-5e044eba5edc" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Extract video&apos;s stats data</body>
                    </command>
                    <nestedSteps>
                        <item guid="aeda8762-d86e-4f24-8f5d-dc8fa93af3e6" action="call" useFieldsInCommand="false">
                            <command>
                                <body>get_video_stats(video_url=video_url, fresh_start=fresh_start)</body>
                            </command>
                            <postProcessing>
                                <storeResponseAt>response</storeResponseAt>
                                <storeResponseText>true</storeResponseText>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="3abef3cc-22cc-4698-a765-ea9a71f5baf1" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Cleanup</body>
                    </command>
                    <nestedSteps>
                        <item guid="7e7f48d3-6fa9-466d-97f2-b9f1ca5a867a" action="call" useFieldsInCommand="false">
                            <command>
                                <body>clean_up(need_screenshot=&apos;false&apos;)</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="none">
                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                        </extractorInfo>
                                        <processorInfo ruleType="assert">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                <expression>True</expression>
                                                <actionsWhenTrue>
                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                </actionsWhenTrue>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="243ea30f-e779-46b6-8045-478640f7594b" action="return">
                    <command>
                        <body>[response]</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
        </item>
        <item name="enable_stats_for_nerds" isPublic="true">
            <steps>
                <item guid="a0b0c898-2ad6-485d-aedd-8185b91847ed" action="if" useFieldsInCommand="false">
                    <command>
                        <body>fresh_start:</body>
                    </command>
                    <nestedSteps>
                        <item guid="2e6466ae-b512-491c-80d9-970307ad1fa4" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Click &apos;Account&apos; avatar on the top-right corner if have. This layout appears after clearing the app&apos;s data</body>
                            </command>
                            <nestedSteps>
                                <item guid="c444628d-3377-4385-9bf1-92187155a8d3" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>xpath_to_account = &apos;//android.widget.ImageView[@content-desc=&quot;Account&quot;]&apos;</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="1de1a6cb-f98f-4582-9d40-bcff48a119ef" action="command" session="s1" useFieldsInCommand="false">
                                    <command>
                                        <body>time.sleep(1.5)</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="5bd68566-4ac5-4402-b59b-933f575e80cd" action="wait_until" session="s1" useFieldsInCommand="false">
                                    <command>
                                        <body>condition=&apos;visibility_of_element_located&apos;, xpath=&apos;[xpath_to_account]&apos;, timeout=10.0</body>
                                    </command>
                                    <applicationProperties type="com.spirent.itest.applications.appium.properties.WaitUntilStepProperties">
                                        <condition>visibility_of_element_located</condition>
                                        <target sub="true">[xpath_to_account]</target>
                                        <timeout>10.0</timeout>
                                    </applicationProperties>
                                </item>
                                <item guid="65950946-c02c-41e7-b5ba-dc605d71e27e" action="command" session="s1">
                                    <command>
                                        <body>driver.find_element(By.XPATH, &apos;[xpath_to_account]&apos;).click()</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="contains">
                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                                        <searchString>Traceback (most recent call last):</searchString>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="assert">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                        <expression>value == 1</expression>
                                                        <actionsWhenTrue>
                                                            <item actionId="DeclareExecutionIssue">
                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                    <message>Cannot click the &quot;Account&quot; at the top-right corner</message>
                                                                </actionProperties>
                                                            </item>
                                                            <item actionId="FailTest">
                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                            </item>
                                                            <item actionId="ExitExecution">
                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                            </item>
                                                        </actionsWhenTrue>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="8cd0ede0-f7d5-4ced-98a1-5218e2d673b1" action="else" useFieldsInCommand="false">
                    <nestedSteps>
                        <item guid="5e0561eb-b001-40e8-8f09-b879d39bd13e" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Check &quot;You&quot; tab</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="e8d82165-38bb-4534-abaa-e4800e65d8bf" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>xpath_to_you_tab = &apos;//android.widget.Button[@content-desc=&quot;You&quot;]&apos;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="1e05ea48-f237-4068-9a57-2048a068d998" action="command" session="s1" useFieldsInCommand="false">
                            <command>
                                <body>time.sleep(1.5)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="03472754-5fa8-4182-a8ba-435250418399" action="wait_until" session="s1" useFieldsInCommand="false">
                            <command>
                                <body>condition=&apos;visibility_of_element_located&apos;, xpath=&apos;[xpath_to_you_tab]&apos;, timeout=10.0</body>
                            </command>
                            <applicationProperties type="com.spirent.itest.applications.appium.properties.WaitUntilStepProperties">
                                <condition>visibility_of_element_located</condition>
                                <target sub="true">[xpath_to_you_tab]</target>
                                <timeout>10.0</timeout>
                            </applicationProperties>
                        </item>
                        <item guid="4e3d2e55-5988-4a04-b270-84949d9e80a1" action="command" session="s1">
                            <command>
                                <body>driver.find_element(By.XPATH, &apos;[xpath_to_you_tab]&apos;).click()</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="contains">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                                <searchString>Traceback (most recent call last):</searchString>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="assert">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                <expression>value == 1</expression>
                                                <actionsWhenTrue>
                                                    <item actionId="DeclareExecutionIssue">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                            <message>Cannot click the &quot;You&quot; tab at the bottom-right corner</message>
                                                        </actionProperties>
                                                    </item>
                                                    <item actionId="FailTest">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                    <item actionId="ExitExecution">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                </actionsWhenTrue>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="9b3ef776-9b76-4ba5-919d-22ce8e909665" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Check if it&apos;s already logged in not</body>
                    </command>
                    <nestedSteps>
                        <item guid="2d44b90f-0e06-47e3-ae44-6238220feb63" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>xpath_to_signin_button = &apos;//android.widget.Button[lower-case(@text)=&quot;sign in&quot;]&apos;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="f4196cbb-d481-4c01-80cf-772a7523d6d2" action="command" session="s1">
                            <command>
                                <body>driver.find_element(By.XPATH, &apos;[xpath_to_signin_button]&apos;)</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="contains">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                                <searchString>Traceback (most recent call last):</searchString>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="assert">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                <expression>value == 1</expression>
                                                <actionsWhenFalse>
                                                    <item actionId="DeclareExecutionIssue">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                            <message>Please log in to Youtube application</message>
                                                        </actionProperties>
                                                    </item>
                                                    <item actionId="FailTest">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                    <item actionId="ExitExecution">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                </actionsWhenFalse>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="7aa5e413-bd67-4843-9c25-25a4a00a8560" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Find and click &quot;Settings&quot; icon</body>
                    </command>
                    <nestedSteps>
                        <item guid="381caf52-cef4-4b83-9428-75db433cb45e" action="if" useFieldsInCommand="false">
                            <command>
                                <body>fresh_start:</body>
                            </command>
                            <nestedSteps>
                                <item guid="0c5f3d20-4088-4130-85dc-6747ea2fb300" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>xpath_to_settings = &apos;//android.widget.TextView[@text=&quot;Settings&quot;]&apos;</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="c3445de1-4413-4b0a-ab06-1beda497c5f4" action="call" useFieldsInCommand="false">
                                    <command>
                                        <body>scroll_to_option(option=xpath_to_settings)</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="7548b88f-697e-4364-89c3-ad5fd131a4ad" action="command" session="s1" useFieldsInCommand="false">
                                    <command>
                                        <body>found.click()</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="c47b2ecc-0c84-4992-9e28-0326c90fdf8a" action="else" useFieldsInCommand="false">
                            <nestedSteps>
                                <item guid="e8d82165-38bb-4534-abaa-e4800e65d8bf" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>xpath_to_settings = &apos;//android.widget.ImageView[@content-desc=&quot;Settings&quot;]&apos;</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="05829dcc-e6e6-4a6c-b762-13e687ebf1eb" action="command" session="s1" useFieldsInCommand="false">
                                    <command>
                                        <body>time.sleep(1.5)</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="03472754-5fa8-4182-a8ba-435250418399" action="wait_until" session="s1" useFieldsInCommand="false">
                                    <command>
                                        <body>condition=&apos;visibility_of_element_located&apos;, xpath=&apos;[xpath_to_settings]&apos;, timeout=5.0</body>
                                    </command>
                                    <applicationProperties type="com.spirent.itest.applications.appium.properties.WaitUntilStepProperties">
                                        <condition>visibility_of_element_located</condition>
                                        <target sub="true">[xpath_to_settings]</target>
                                    </applicationProperties>
                                </item>
                                <item guid="3b20ca75-d776-4f40-88cc-b30815813b4a" action="command" session="s1" estimatedStepExecutionTime="1.662">
                                    <command>
                                        <body>driver.find_element(By.XPATH, &apos;[xpath_to_settings]&apos;).click()</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="ea203aa6-a370-4ed6-bb60-532b8c484992" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Click &quot;General&quot; item</body>
                    </command>
                    <nestedSteps>
                        <item guid="e8d82165-38bb-4534-abaa-e4800e65d8bf" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>xpath_to_general = &apos;//android.widget.TextView[@text=&quot;General&quot;]&apos;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="f037b28d-c143-4c9d-98bb-8e55a2700b1b" action="command" session="s1" useFieldsInCommand="false">
                            <command>
                                <body>time.sleep(1.5)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="03472754-5fa8-4182-a8ba-435250418399" action="wait_until" session="s1" useFieldsInCommand="false">
                            <command>
                                <body>condition=&apos;visibility_of_element_located&apos;, xpath=&apos;[xpath_to_general]&apos;, timeout=5.0</body>
                            </command>
                            <applicationProperties type="com.spirent.itest.applications.appium.properties.WaitUntilStepProperties">
                                <condition>visibility_of_element_located</condition>
                                <target sub="true">[xpath_to_general]</target>
                            </applicationProperties>
                        </item>
                        <item guid="3b20ca75-d776-4f40-88cc-b30815813b4a" action="command" session="s1" estimatedStepExecutionTime="1.662">
                            <command>
                                <body>driver.find_element(By.XPATH, &apos;[xpath_to_general]&apos;).click()</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="0c604d1e-3aee-4d5c-9cb5-238e30559328" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Click &quot;Enable stats for nerds&quot;</body>
                    </command>
                    <nestedSteps>
                        <item guid="d3d45171-a677-4c63-8979-836625604506" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Scroll to find the option</body>
                            </command>
                            <nestedSteps>
                                <item guid="3abf4f41-fd09-4008-ac9d-baa3da1b8330" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>xpath_to_stats_for_nerds_switch = &apos;(//android.widget.TextView[@text=&quot;Enable stats for nerds&quot;]/../..//android.widget.Switch)&apos;</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="033eddb3-b4f7-4002-a212-0d538140d2a5" action="call" useFieldsInCommand="false">
                                    <command>
                                        <body>scroll_to_option(option=xpath_to_stats_for_nerds_switch, store_to_variable=&apos;stats_for_nerds_switch&apos;)</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="91e0d111-297d-42f8-8e9a-a1b9e07500f5" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>Check if it&apos;s enabled or not</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="aee033fb-ad7d-4882-beaa-c851bf6fafe7" action="get_attribute" session="s1" normalOffset="9.97" useFieldsInCommand="false">
                                            <command>
                                                <body>xpath=&apos;[xpath_to_stats_for_nerds_switch]&apos;, attribute=&apos;checked&apos;</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>responseLine()</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>is_enabled</storageLocation>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.spirent.itest.applications.appium.properties.GetAttributeStepProperties">
                                                <target sub="true">[xpath_to_stats_for_nerds_switch]</target>
                                                <attribute>checked</attribute>
                                            </applicationProperties>
                                        </item>
                                        <item guid="d907e75d-92ec-4072-ae03-1ff5f23d8985" action="if" useFieldsInCommand="false">
                                            <command>
                                                <body>is_enabled != &quot;true&quot;:</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="b43f84ff-bba1-4a2e-8117-66557fdf08ef" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Tap the switch to enable this option</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="5f0b596b-b7cf-48b9-9ee4-5fc4db0733ca" action="command" session="s1" useFieldsInCommand="false">
                                                            <command>
                                                                <body>stats_for_nerds_switch.click()</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="d190e9a7-cb16-41e9-b2f8-cf1ee7146a9a" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Double check</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="46df9a42-fde4-4b41-a895-75cfceae9043" action="get_attribute" session="s1" normalOffset="9.97" useFieldsInCommand="false">
                                                            <command>
                                                                <body>xpath=&apos;[xpath_to_stats_for_nerds_switch]&apos;, attribute=&apos;checked&apos;</body>
                                                            </command>
                                                            <postProcessing>
                                                                <analysisRules>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                <query>responseLine</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="assert">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                <expression>value == &quot;true&quot;</expression>
                                                                                <actionsWhenTrue>
                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                            <message>Successfully enabled the stats for nerds option</message>
                                                                                        </actionProperties>
                                                                                    </item>
                                                                                </actionsWhenTrue>
                                                                                <actionsWhenFalse>
                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                            <message>Failed to enable stats for nerds option</message>
                                                                                        </actionProperties>
                                                                                    </item>
                                                                                    <item actionId="FailTest">
                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                    </item>
                                                                                    <item actionId="ExitExecution">
                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                    </item>
                                                                                </actionsWhenFalse>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                </analysisRules>
                                                                <storeResponseAt>is_enabled</storeResponseAt>
                                                                <storeResponseText>true</storeResponseText>
                                                            </postProcessing>
                                                            <applicationProperties type="com.spirent.itest.applications.appium.properties.GetAttributeStepProperties">
                                                                <target sub="true">[xpath_to_stats_for_nerds_switch]</target>
                                                                <attribute>checked</attribute>
                                                            </applicationProperties>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="076be54d-2afb-4142-883c-4478b37031e4" action="else" useFieldsInCommand="false">
                                            <nestedSteps>
                                                <item guid="53770217-94e6-488c-a294-8aa151614769" action="message" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Information:Stats for nerds option is already enabled</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.execution.builtin.exec.MessagePropertyGroup">
                                                        <message inherit="false">Stats for nerds option is already enabled</message>
                                                    </applicationProperties>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <arguments>
                <item name="fresh_start"/>
            </arguments>
        </item>
        <item name="scroll_to_option">
            <steps>
                <item guid="58cfcd4e-a49e-43cc-b3ed-7f68c6bf87d9" action="for" useFieldsInCommand="false">
                    <command>
                        <body>i in range(0, 10):</body>
                    </command>
                    <nestedSteps>
                        <item guid="70534f83-cf59-4e7b-899d-e5da7323fb46" action="command" session="s1" estimatedStepExecutionTime="6.115">
                            <command>
                                <body>driver.find_element(By.XPATH, &apos;[option]&apos;)</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="contains">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                                <searchString>Traceback (most recent call last):</searchString>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="assert">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                <expression>value == 0</expression>
                                                <actionsWhenTrue>
                                                    <item actionId="Break">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                </actionsWhenTrue>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <eventHandlers>
                                <item name="OnAppiumCommandFailed"/>
                            </eventHandlers>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="4e76dddd-13bd-4e0d-9b45-c1dca40695e0" action="command" session="s1" estimatedStepExecutionTime="1.518" useFieldsInCommand="false">
                            <command>
                                <body>driver.find_element(By.ANDROID_UIAUTOMATOR, &apos;new UiScrollable(new UiSelector().scrollable(true).instance(0)).scrollToEnd(1)&apos;)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="30765c26-796c-431e-b65d-b964028398dc" action="command" session="s1">
                    <command>
                        <body>[store_to_variable] = driver.find_element(By.XPATH, &apos;[option]&apos;)</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="contains">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                        <searchString>Traceback (most recent call last):</searchString>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>value == 0</expression>
                                        <actionsWhenFalse>
                                            <item actionId="DeclareExecutionIssue">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                    <message>Failed to find Settings menu option. Please see error message in the step response.</message>
                                                </actionProperties>
                                            </item>
                                            <item actionId="FailTest">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                            <item actionId="ExitExecution">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                        </actionsWhenFalse>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <arguments>
                <item name="option">
                    <isMandatory>true</isMandatory>
                </item>
                <item name="store_to_variable">
                    <defaultValue>found</defaultValue>
                    <isMandatory>true</isMandatory>
                </item>
            </arguments>
        </item>
        <item name="get_video_stats" isPublic="true">
            <steps>
                <item guid="3723e25e-4f8b-4351-8523-e14db60c61c0" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Pause the video while opening the &quot;stats for nerds&quot; option</body>
                    </command>
                    <nestedSteps>
                        <item guid="5c5444ed-0a07-4cf3-aab1-24bb83873373" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>video_player_id = &apos;com.google.android.youtube:id/player_view&apos;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="a732ca80-9c80-45e4-a1cd-2ea050a2a8db" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>play_pause_button_id = &apos;com.google.android.youtube:id/player_control_play_pause_replay_button&apos;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="fcff62b7-13ef-4a47-8582-222fe20de116" action="for" useFieldsInCommand="false">
                            <command>
                                <body>i in range(0, 10):</body>
                            </command>
                            <nestedSteps>
                                <item guid="11a84334-b4bc-450f-8eca-f7c54fd79208" action="command" session="s1" estimatedStepExecutionTime="1.662">
                                    <command>
                                        <body>driver.find_element(By.ID, &apos;[video_player_id]&apos;).click()</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="5890cb14-7300-44e7-94a2-bd1c424b3330" action="command" session="s1" estimatedStepExecutionTime="1.662">
                                    <command>
                                        <body>driver.find_element(By.XPATH, &apos;//android.widget.ImageView\\[@resource-id=&quot;[play_pause_button_id]&quot;]&apos;).click()</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="contains">
                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                                        <searchString>Traceback (most recent call last):</searchString>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="assert">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                        <expression>value == 1</expression>
                                                        <actionsWhenFalse>
                                                            <item actionId="Break">
                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                            </item>
                                                        </actionsWhenFalse>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="23d17f79-f98d-406b-a979-1fd3a3e28b61" action="command" session="s1" useFieldsInCommand="false">
                                    <command>
                                        <body>time.sleep(1.0)</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="9cded529-293b-458a-a958-ee83c3ca9de9" action="else" useFieldsInCommand="false">
                            <nestedSteps>
                                <item guid="73cbf134-b4df-4999-aefe-f8b67c762bd3" action="message" useFieldsInCommand="false">
                                    <command>
                                        <body>Error:Cannot click the player view to pause the video.</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="none">
                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                </extractorInfo>
                                                <processorInfo ruleType="assert">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                        <expression>False</expression>
                                                        <actionsWhenFalse>
                                                            <item actionId="FailTest">
                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                            </item>
                                                            <item actionId="ExitExecution">
                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                            </item>
                                                        </actionsWhenFalse>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.execution.builtin.exec.MessagePropertyGroup">
                                        <severity inherit="false">Error</severity>
                                        <message inherit="false">Cannot click the player view to pause the video.</message>
                                    </applicationProperties>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="32386594-31ce-4139-8838-52296020fb2b" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Uncheck &apos;Auto play&apos;</body>
                    </command>
                    <nestedSteps>
                        <item guid="fa2d3ba9-c058-4ec1-bd2a-b44304ed489e" action="command" session="s1" useFieldsInCommand="false">
                            <command>
                                <body>time.sleep(1.5)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="8f36de2b-fb81-4692-8d78-2fafea9d3a57" action="eval" estimatedStepExecutionTime="1.662" useFieldsInCommand="false">
                            <command>
                                <body>xpath_to_auto_play = &apos;//android.widget.Switch[@resource-id=&quot;com.google.android.youtube:id/autonav_toggle_button&quot;]&apos;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="5ba2c6d5-ad1b-4658-b3b9-47a1860ddc4f" action="get_attribute" session="s1" normalOffset="9.97" useFieldsInCommand="false">
                            <command>
                                <body>xpath=&apos;[xpath_to_auto_play]&apos;, attribute=&apos;checked&apos;</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>responseLine()</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>is_checked</storageLocation>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.spirent.itest.applications.appium.properties.GetAttributeStepProperties">
                                <target sub="true">[xpath_to_auto_play]</target>
                                <attribute>checked</attribute>
                            </applicationProperties>
                        </item>
                        <item guid="b8c03043-aa50-46a1-bd0d-02789052335a" action="if" useFieldsInCommand="false">
                            <command>
                                <body>is_checked == &quot;true&quot;:</body>
                            </command>
                            <nestedSteps>
                                <item guid="ec2021ce-45bf-4b05-91bd-b298f41605b0" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>Tap the switch to enable this option</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="84ed8490-33f1-4d70-8571-5f8e609701f6" action="command" session="s1" estimatedStepExecutionTime="1.662">
                                            <command>
                                                <body>driver.find_element(By.XPATH, &apos;[xpath_to_auto_play]&apos;).click()</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="7901decc-cdb4-44ca-abf4-5c21eb9365c2" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Click the &quot;More options&quot; icon</body>
                    </command>
                    <nestedSteps>
                        <item guid="9a955d87-60f7-412d-ba3c-21d66e4f3c4f" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>xpath_to_more_options = &apos;//android.widget.ImageView[@content-desc=&quot;More options&quot;]&apos;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="9a011c06-2461-4da6-9a2e-5df6ed660900" action="command" session="s1" estimatedStepExecutionTime="1.662">
                            <command>
                                <body>driver.find_element(By.XPATH, &apos;[xpath_to_more_options]&apos;).click()</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="contains">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                                <searchString>Traceback (most recent call last):</searchString>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="assert">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                <expression>value == 1</expression>
                                                <actionsWhenTrue>
                                                    <item actionId="DeclareExecutionIssue">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                            <message>Cannot find the video&apos;s &quot;More options&quot;</message>
                                                        </actionProperties>
                                                    </item>
                                                    <item actionId="FailTest">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                    <item actionId="ExitExecution">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                </actionsWhenTrue>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="066eef26-9a51-460c-9797-a15088f3da5f" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Click &quot;Additional Settings&quot; option</body>
                    </command>
                    <nestedSteps>
                        <item guid="52b39858-15d7-4490-adeb-242d89955100" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>xpath_to_additional_settings = &apos;//android.view.ViewGroup[contains(@content-desc, &quot;Additional settings&quot;)]&apos;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="79114ae6-c6d3-4cab-9fa4-4129dec92b37" action="command" session="s1" useFieldsInCommand="false">
                            <command>
                                <body>time.sleep(1.5)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="8dfbd697-8ccc-4144-9021-f83ea99f162c" action="wait_until" session="s1" useFieldsInCommand="false">
                            <command>
                                <body>condition=&apos;visibility_of_element_located&apos;, xpath=&apos;[xpath_to_additional_settings]&apos;, timeout=5.0</body>
                            </command>
                            <applicationProperties type="com.spirent.itest.applications.appium.properties.WaitUntilStepProperties">
                                <condition>visibility_of_element_located</condition>
                                <target sub="true">[xpath_to_additional_settings]</target>
                            </applicationProperties>
                        </item>
                        <item guid="b28907be-e928-4049-810a-5b451a1849a5" action="command" session="s1" estimatedStepExecutionTime="1.662">
                            <command>
                                <body>driver.find_element(By.XPATH, &apos;[xpath_to_additional_settings]&apos;).click()</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="08d519fc-ebd1-493a-8a91-097f3487e0fd" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Click &quot;Stats for nerds&quot; option</body>
                    </command>
                    <nestedSteps>
                        <item guid="52b39858-15d7-4490-adeb-242d89955100" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>xpath_to_nerds_stats = &apos;//android.view.ViewGroup[contains(@content-desc, &quot;Stats for nerds&quot;)]&apos;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="8dfbd697-8ccc-4144-9021-f83ea99f162c" action="wait_until" session="s1" useFieldsInCommand="false">
                            <command>
                                <body>condition=&apos;visibility_of_element_located&apos;, xpath=&apos;[xpath_to_nerds_stats]&apos;, timeout=5.0</body>
                            </command>
                            <applicationProperties type="com.spirent.itest.applications.appium.properties.WaitUntilStepProperties">
                                <condition>visibility_of_element_located</condition>
                                <target sub="true">[xpath_to_nerds_stats]</target>
                            </applicationProperties>
                        </item>
                        <item guid="b28907be-e928-4049-810a-5b451a1849a5" action="command" session="s1" estimatedStepExecutionTime="1.662">
                            <command>
                                <body>driver.find_element(By.XPATH, &apos;[xpath_to_nerds_stats]&apos;).click()</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="contains">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                                <searchString>Traceback (most recent call last):</searchString>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="assert">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                <expression>value == 0</expression>
                                                <actionsWhenTrue>
                                                    <item actionId="DeclareExecutionIssue">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                            <message>Successfully opened the &quot;Stats for nerds&quot; view</message>
                                                        </actionProperties>
                                                    </item>
                                                </actionsWhenTrue>
                                                <actionsWhenFalse>
                                                    <item actionId="DeclareExecutionIssue">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                            <message>Failed to open the &quot;Stats for nerds&quot; view</message>
                                                        </actionProperties>
                                                    </item>
                                                    <item actionId="FailTest">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                    <item actionId="ExitExecution">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                </actionsWhenFalse>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="f1ee291b-0a09-4300-b446-454ee7e3b96f" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Extract video&apos;s stats data</body>
                    </command>
                    <nestedSteps>
                        <item guid="52b39858-15d7-4490-adeb-242d89955100" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>nerds_stats_layout_id = &apos;com.google.android.youtube:id/nerd_stats_layout&apos;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="8dfbd697-8ccc-4144-9021-f83ea99f162c" action="wait_until" session="s1" useFieldsInCommand="false">
                            <command>
                                <body>condition=&apos;visibility_of_element_located&apos;, id=&apos;[nerds_stats_layout_id]&apos;, timeout=5.0</body>
                            </command>
                            <applicationProperties type="com.spirent.itest.applications.appium.properties.WaitUntilStepProperties">
                                <condition>visibility_of_element_located</condition>
                                <selector>id</selector>
                                <target sub="true">[nerds_stats_layout_id]</target>
                            </applicationProperties>
                        </item>
                        <item guid="91bbe42b-26a6-40eb-b583-7798015ea11b" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Check the bandwidth field</body>
                            </command>
                            <nestedSteps>
                                <item guid="4610c590-227f-4e19-89fa-4c1163e9b351" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>Check if the script should wait some time for the bandwidth based on the readhead</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="9f96a980-9d9e-4eda-bad7-761a2287a0a5" action="comment" useFieldsInCommand="false">
                                            <command>
                                                <body>The &quot;bandwidth&quot; only increases during the download of the &quot;readahead&quot; so we need to calculate the wait time to get this value</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="39e2d6a5-95ee-4b96-90ca-95ea4c573cd9" action="get_attribute" session="s1" normalOffset="14.331" useFieldsInCommand="false">
                                            <command>
                                                <body>xpath=&apos;//android.widget.TextView[@resource-id=&quot;com.google.android.youtube:id/time_bar_total_time&quot;]&apos;, attribute=&apos;text&apos;</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>group1()</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>total_expected_duration_info</storageLocation>
                                                                <query>Total_Expected_Duration</query>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.spirent.itest.applications.appium.properties.GetAttributeStepProperties">
                                                <target>//android.widget.TextView[@resource-id=&quot;com.google.android.youtube:id/time_bar_total_time&quot;]</target>
                                                <attribute>text</attribute>
                                            </applicationProperties>
                                        </item>
                                        <item guid="e21d19c9-75a0-4849-b5f6-2c1d22dce0e4" action="get_attribute" session="s1" normalOffset="181.301" useFieldsInCommand="false">
                                            <command>
                                                <body>xpath=&apos;//android.widget.TextView[@resource-id=&quot;com.google.android.youtube:id/time_bar_current_time&quot;]&apos;, attribute=&apos;text&apos;</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>responseLine()</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>actual_played_duration_info</storageLocation>
                                                                <query>Actual_Played_Time</query>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.spirent.itest.applications.appium.properties.GetAttributeStepProperties">
                                                <target>//android.widget.TextView[@resource-id=&quot;com.google.android.youtube:id/time_bar_current_time&quot;]</target>
                                                <attribute>text</attribute>
                                            </applicationProperties>
                                        </item>
                                        <item guid="68c42392-8cef-4b60-8cd7-4d5fcdb08c8a" action="get_attribute" session="s1" normalOffset="14.331" useFieldsInCommand="false">
                                            <command>
                                                <body>xpath=&apos;//android.widget.TextView[@resource-id=&quot;com.google.android.youtube:id/readahead&quot;]&apos;, attribute=&apos;text&apos;</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>responseLine()</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>readahead_info</storageLocation>
                                                                <query>Dropped_Frames</query>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.spirent.itest.applications.appium.properties.GetAttributeStepProperties">
                                                <target>//android.widget.TextView[@resource-id=&quot;com.google.android.youtube:id/readahead&quot;]</target>
                                                <attribute>text</attribute>
                                            </applicationProperties>
                                        </item>
                                        <item guid="d12c4943-d52b-4872-86a0-2c1d3f107098" action="call" useFieldsInCommand="false">
                                            <command>
                                                <body>wait_time_for_bandwidth(actual_played_duration=actual_played_duration_info, total_duration=total_expected_duration_info, readahead=readahead_info)</body>
                                            </command>
                                            <postProcessing>
                                                <storeResponseAt>wait_buffering_time</storeResponseAt>
                                                <storeResponseText>true</storeResponseText>
                                            </postProcessing>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="c6a6ea0e-eccd-43fd-8074-8012160c6133" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>Play the video if grabbing the bandwidth is needed</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="5d158376-8268-4262-a6e2-751083f62bf7" action="if" useFieldsInCommand="false">
                                            <command>
                                                <body>wait_buffering_time &gt; 0:</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="cfbe5336-ce62-43bb-a639-d17302a599fd" action="command" session="s1" estimatedStepExecutionTime="1.662">
                                                    <command>
                                                        <body>driver.find_element(By.ID, &apos;[play_pause_button_id]&apos;).click()</body>
                                                    </command>
                                                    <postProcessing>
                                                        <analysisRules>
                                                            <item>
                                                                <extractorInfo extractorType="contains">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                                                        <searchString>Traceback (most recent call last):</searchString>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="assert">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                        <expression>value == 1</expression>
                                                                        <actionsWhenTrue>
                                                                            <item actionId="DeclareExecutionIssue">
                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                    <message>Failed to play the video</message>
                                                                                </actionProperties>
                                                                            </item>
                                                                            <item actionId="FailTest">
                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                            </item>
                                                                            <item actionId="ExitExecution">
                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                            </item>
                                                                        </actionsWhenTrue>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                        </analysisRules>
                                                    </postProcessing>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="bddc2902-e4f4-4301-b838-3b348db71392" action="message" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Information:Waiting for bandwidth (up to [wait_buffering_time]s)...</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.execution.builtin.exec.MessagePropertyGroup">
                                                        <message inherit="false">Waiting for bandwidth (up to [wait_buffering_time]s)...</message>
                                                    </applicationProperties>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="539d39c1-72c7-459b-935f-98b8be83cb04" action="else" useFieldsInCommand="false">
                                            <nestedSteps>
                                                <item guid="17e51b4a-cd8c-419e-ac35-b40cb20f3743" action="message" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Information:Video is already buffered with all data. Bandwidth may be reported as 0.0 kbps</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.execution.builtin.exec.MessagePropertyGroup">
                                                        <message inherit="false">Video is already buffered with all data. Bandwidth may be reported as 0.0 kbps</message>
                                                    </applicationProperties>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="2962aab3-d362-4a28-ba0b-5604b7de76bd" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>Wait for the bandwidth to be not &quot;0.00 kbps&quot;</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="ce4a1ab0-0d23-4d50-918d-35f895ed6cb2" action="get_attribute" session="s1" normalOffset="14.331" useFieldsInCommand="false">
                                            <command>
                                                <body>xpath=&apos;//android.widget.TextView[@resource-id=&quot;com.google.android.youtube:id/bandwidth_estimate&quot;]&apos;, attribute=&apos;text&apos;</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>responseLine()</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="assert">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                <expression>str(value).strip() == &quot;0.00 kbps&quot;</expression>
                                                                <actionsWhenTrue>
                                                                    <item actionId="RepeatStep">
                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="[wait_buffering_time]" maxRepeatCount.sub="true" delayBetweenRepeats="0.5"/>
                                                                    </item>
                                                                </actionsWhenTrue>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                <query>responseLine()</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>bandwidth_info</storageLocation>
                                                                <query>Bandwidth</query>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <eventHandlers>
                                                <item name="OnRepeatStepMaxCountExceeded"/>
                                            </eventHandlers>
                                            <applicationProperties type="com.spirent.itest.applications.appium.properties.GetAttributeStepProperties">
                                                <target>//android.widget.TextView[@resource-id=&quot;com.google.android.youtube:id/bandwidth_estimate&quot;]</target>
                                                <attribute>text</attribute>
                                            </applicationProperties>
                                        </item>
                                        <item guid="3cc68f58-d5e4-4666-bd66-7e0a97fe2633" action="message" useFieldsInCommand="false">
                                            <command>
                                                <body>OK:Bandwidth retrieved with value &quot;[bandwidth_info]&quot;</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.execution.builtin.exec.MessagePropertyGroup">
                                                <severity inherit="false">OK</severity>
                                                <message inherit="false">Bandwidth retrieved with value &quot;[bandwidth_info]&quot;</message>
                                            </applicationProperties>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="a2475108-e888-45d5-ab98-eaa5fb893e7e" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Check and wait for the video to play its full length</body>
                            </command>
                            <nestedSteps>
                                <item guid="222ddc00-61c2-4ef1-9a04-5153962986e1" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>Get the latest value of actual played duration</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="0a731dda-340a-4425-b719-8bb820c04c7c" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>next_video_close_btn_id = &apos;com.google.android.youtube:id/close_button&apos;</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="707b70f7-78c5-4b9d-ac08-82992808532a" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>current_time_id = &apos;com.google.android.youtube:id/time_bar_current_time&apos;</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="a7a77435-2f42-4ebb-aa39-955d9aaa2681" action="command" session="s1">
                                            <command>
                                                <body>driver.find_element(By.ID, &apos;[next_video_close_btn_id]&apos;)</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="contains">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                                                <searchString>Traceback (most recent call last):</searchString>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="assert">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                <expression>value == 0</expression>
                                                                <actionsWhenTrue>
                                                                    <item actionId="Eval">
                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                                            <statement>video_ends = True</statement>
                                                                        </actionProperties>
                                                                    </item>
                                                                </actionsWhenTrue>
                                                                <actionsWhenFalse>
                                                                    <item actionId="Eval">
                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                                            <statement>video_ends = False</statement>
                                                                        </actionProperties>
                                                                    </item>
                                                                </actionsWhenFalse>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="0b15e7c6-4d0f-48d3-8c00-94d72294ae1a" action="if" useFieldsInCommand="false">
                                            <command>
                                                <body>video_ends:</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="4cc4f98d-0b61-47d1-8815-43b64697dddc" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Already played full time. Click Close button on the top-right to close the &quot;Suggested next video&quot; view.</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="23f74bba-1198-480d-8a04-a19b05c2a3b7" action="command" session="s1" estimatedStepExecutionTime="1.662">
                                                    <command>
                                                        <body>driver.find_element(By.ID, &apos;[next_video_close_btn_id]&apos;).click()</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="1281e2ed-0a1d-4b0b-b86d-c1b6bbb60ce1" action="else" useFieldsInCommand="false">
                                            <nestedSteps>
                                                <item guid="95856bdb-a2d6-4cf3-9527-286e0b718e0e" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Click the player view to get the actual played time</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="e90ffc5e-b95a-4a4b-bd38-4552d0017ef0" action="command" session="s1" estimatedStepExecutionTime="1.662">
                                                    <command>
                                                        <body>driver.find_element(By.ID, &apos;[video_player_id]&apos;).click()</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="3f9156ff-4ce9-4ecb-ad3f-032b5c32cc6a" action="get_attribute" session="s1" normalOffset="181.301" useFieldsInCommand="false">
                                                    <command>
                                                        <body>xpath=&apos;//android.widget.TextView\\\\[@resource-id=&quot;[current_time_id]&quot;]&apos;, attribute=&apos;text&apos;</body>
                                                    </command>
                                                    <postProcessing>
                                                        <analysisRules>
                                                            <item>
                                                                <extractorInfo extractorType="contains">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                                                        <searchString>Traceback (most recent call last):</searchString>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="assert">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                        <expression>value == 1</expression>
                                                                        <actionsWhenTrue>
                                                                            <item actionId="Eval">
                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                                                    <statement>actual_played_time_info = total_expected_duration_info</statement>
                                                                                </actionProperties>
                                                                            </item>
                                                                            <item actionId="SkipRemainingRules">
                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                            </item>
                                                                        </actionsWhenTrue>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                        <query>responseLine()</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>actual_played_time_info</storageLocation>
                                                                        <query>Actual_Played_Time</query>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                        </analysisRules>
                                                    </postProcessing>
                                                    <applicationProperties type="com.spirent.itest.applications.appium.properties.GetAttributeStepProperties">
                                                        <target sub="true">//android.widget.TextView\\[@resource-id=&quot;[current_time_id]&quot;]</target>
                                                        <attribute>text</attribute>
                                                    </applicationProperties>
                                                </item>
                                                <item guid="1e922fc3-d92b-4a32-a712-695b480b8401" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Check the remaining time of the video and wait for that long</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="26d61cad-fe29-461a-9a56-76b5f72c56ab" action="call" useFieldsInCommand="false">
                                                            <command>
                                                                <body>convert_to_datetime_object(time_str=total_expected_duration_info)</body>
                                                            </command>
                                                            <postProcessing>
                                                                <storeResponseAt>total_time_obj</storeResponseAt>
                                                                <storeResponseText>true</storeResponseText>
                                                            </postProcessing>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="db092960-0b6f-4e2f-8c33-ae84579b9f1c" action="call" useFieldsInCommand="false">
                                                            <command>
                                                                <body>convert_to_datetime_object(time_str=actual_played_time_info)</body>
                                                            </command>
                                                            <postProcessing>
                                                                <storeResponseAt>actual_time_obj</storeResponseAt>
                                                                <storeResponseText>true</storeResponseText>
                                                            </postProcessing>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="e51e877f-39fa-4b97-aef2-4f4847c8254e" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>sleep_time = math.ceil((total_time_obj - actual_time_obj).total_seconds())</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="fd5ed37e-0a51-4f3f-b199-88d8cafa9a64" action="message" useFieldsInCommand="false">
                                                            <command>
                                                                <body>Information:Waiting [sleep_time]s for the video to play to the end...</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.execution.builtin.exec.MessagePropertyGroup">
                                                                <message inherit="false">Waiting [sleep_time]s for the video to play to the end...</message>
                                                            </applicationProperties>
                                                        </item>
                                                        <item guid="96622407-7845-45e4-ae97-d2ae04c9f3cc" action="sleep">
                                                            <command>
                                                                <body>[sleep_time]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="63f5e9cb-b835-4ab7-9064-be31be56defe" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Expect the &quot;suggested next video&quot; view to display when the video is played to an end. Find the close button on the top-right corner</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="ac0dae33-42e6-4253-aca0-3f40151dcc57" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>video_ends = True</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="2e0f382b-02c7-4fa0-86a9-324008b4f5e2" action="wait_until" session="s1" useFieldsInCommand="false">
                                                            <command>
                                                                <body>condition=&apos;visibility_of_element_located&apos;, id=&apos;[next_video_close_btn_id]&apos;, timeout=10.0</body>
                                                            </command>
                                                            <eventHandlers>
                                                                <item name="OnAppiumCommandFailed">
                                                                    <item actionId="Eval">
                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                                            <statement>video_ends = False</statement>
                                                                        </actionProperties>
                                                                    </item>
                                                                </item>
                                                            </eventHandlers>
                                                            <applicationProperties type="com.spirent.itest.applications.appium.properties.WaitUntilStepProperties">
                                                                <condition>visibility_of_element_located</condition>
                                                                <selector>id</selector>
                                                                <target sub="true">[next_video_close_btn_id]</target>
                                                                <timeout>10.0</timeout>
                                                            </applicationProperties>
                                                        </item>
                                                        <item guid="616b1d56-e2e2-4a85-82fc-a5445c925a5b" action="if" useFieldsInCommand="false">
                                                            <command>
                                                                <body>video_ends:</body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="9513a6cd-1af2-400a-9dab-0df602071b7b" action="command" session="s1" estimatedStepExecutionTime="1.662">
                                                                    <command>
                                                                        <body>driver.find_element(By.ID, &apos;[next_video_close_btn_id]&apos;).click()</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="02aef7f9-23ab-4e5a-90ec-b936ad487496" action="else" useFieldsInCommand="false">
                                                            <nestedSteps>
                                                                <item guid="1208fde5-0a1c-4c20-b259-572787c44d38" action="comment" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>More chances the video is stucked if it gets here</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="0e050e33-95fd-4c02-8bdb-76b9e83eeeea" action="command" session="s1" estimatedStepExecutionTime="1.662">
                                                                    <command>
                                                                        <body>driver.find_element(By.ID, &apos;[video_player_id]&apos;).click()</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="5a129671-feae-4938-b73c-fbdeded13245" action="message" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>Warning:The video may be interrupted and cannot play to the end</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.execution.builtin.exec.MessagePropertyGroup">
                                                                        <severity inherit="false">Warning</severity>
                                                                        <message inherit="false">The video may be interrupted and cannot play to the end</message>
                                                                    </applicationProperties>
                                                                </item>
                                                                <item guid="13aae060-40b5-43f5-b3d3-3f5710823ce3" action="screenshot" session="s1" useFieldsInCommand="false">
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="5aaebd14-742c-4fb5-8ee7-cdf6b79da364" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>Get the latest value of actual played duration/dropped frames</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="3f9156ff-4ce9-4ecb-ad3f-032b5c32cc6a" action="get_attribute" session="s1" normalOffset="181.301" useFieldsInCommand="false">
                                            <command>
                                                <body>xpath=&apos;//android.widget.TextView\\\\[@resource-id=&quot;[current_time_id]&quot;]&apos;, attribute=&apos;text&apos;</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="contains">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                                                <searchString>Traceback (most recent call last):</searchString>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="assert">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                <expression>value == 1</expression>
                                                                <actionsWhenTrue>
                                                                    <item actionId="Eval">
                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                                            <statement>actual_played_time_info = total_expected_duration_info</statement>
                                                                        </actionProperties>
                                                                    </item>
                                                                    <item actionId="SkipRemainingRules">
                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                    </item>
                                                                </actionsWhenTrue>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>responseLine()</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>actual_played_time_info</storageLocation>
                                                                <query>Actual_Played_Time</query>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.spirent.itest.applications.appium.properties.GetAttributeStepProperties">
                                                <target sub="true">//android.widget.TextView\\[@resource-id=&quot;[current_time_id]&quot;]</target>
                                                <attribute>text</attribute>
                                            </applicationProperties>
                                        </item>
                                        <item guid="719e0b56-1905-48ec-a1dd-10572228125f" action="get_attribute" session="s1" normalOffset="14.331" useFieldsInCommand="false">
                                            <command>
                                                <body>xpath=&apos;//android.widget.TextView[@resource-id=&quot;com.google.android.youtube:id/dropped_frames&quot;]&apos;, attribute=&apos;text&apos;</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>responseLine()</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>dropped_frames_info</storageLocation>
                                                                <query>Dropped_Frames</query>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.spirent.itest.applications.appium.properties.GetAttributeStepProperties">
                                                <target>//android.widget.TextView[@resource-id=&quot;com.google.android.youtube:id/dropped_frames&quot;]</target>
                                                <attribute>text</attribute>
                                            </applicationProperties>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="eec229df-403d-401b-8020-811784769f19" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>Retrieve the immutable stats for nerd data</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="5eee9ccc-2196-4c7a-92ba-94a696fb1731" action="get_attribute" session="s1" normalOffset="181.301" useFieldsInCommand="false">
                                            <command>
                                                <body>xpath=&apos;//android.widget.TextView[@resource-id=&quot;com.google.android.youtube:id/device_info&quot;]&apos;, attribute=&apos;text&apos;</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>responseLine()</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>device_info</storageLocation>
                                                                <query>Device</query>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.spirent.itest.applications.appium.properties.GetAttributeStepProperties">
                                                <target>//android.widget.TextView[@resource-id=&quot;com.google.android.youtube:id/device_info&quot;]</target>
                                                <attribute>text</attribute>
                                            </applicationProperties>
                                        </item>
                                        <item guid="48698957-7052-40fa-8882-81dcf0111f26" action="get_attribute" session="s1" normalOffset="14.331" useFieldsInCommand="false">
                                            <command>
                                                <body>xpath=&apos;//android.widget.TextView[@resource-id=&quot;com.google.android.youtube:id/video_format&quot;]&apos;, attribute=&apos;text&apos;</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>responseLine()</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>video_format_info</storageLocation>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.spirent.itest.applications.appium.properties.GetAttributeStepProperties">
                                                <target>//android.widget.TextView[@resource-id=&quot;com.google.android.youtube:id/video_format&quot;]</target>
                                                <attribute>text</attribute>
                                            </applicationProperties>
                                        </item>
                                        <item guid="da403e45-8294-4e99-8178-c3278a46b0a4" action="get_attribute" session="s1" normalOffset="14.331" useFieldsInCommand="false">
                                            <command>
                                                <body>xpath=&apos;//android.widget.TextView[@resource-id=&quot;com.google.android.youtube:id/audio_format&quot;]&apos;, attribute=&apos;text&apos;</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>responseLine()</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>audio_format_info</storageLocation>
                                                                <query>Audio_Format</query>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.spirent.itest.applications.appium.properties.GetAttributeStepProperties">
                                                <target>//android.widget.TextView[@resource-id=&quot;com.google.android.youtube:id/audio_format&quot;]</target>
                                                <attribute>text</attribute>
                                            </applicationProperties>
                                        </item>
                                        <item guid="b0a0d49a-7292-4994-8962-405a90d309aa" action="get_attribute" session="s1" normalOffset="14.331" useFieldsInCommand="false">
                                            <command>
                                                <body>xpath=&apos;//android.widget.TextView[@resource-id=&quot;com.google.android.youtube:id/viewport&quot;]&apos;, attribute=&apos;text&apos;</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>responseLine()</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>view_port_info</storageLocation>
                                                                <query>View_Port</query>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.spirent.itest.applications.appium.properties.GetAttributeStepProperties">
                                                <target>//android.widget.TextView[@resource-id=&quot;com.google.android.youtube:id/viewport&quot;]</target>
                                                <attribute>text</attribute>
                                            </applicationProperties>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="54951e48-524c-4c94-8ffa-f6c889819c68" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Add data to report</body>
                    </command>
                    <nestedSteps>
                        <item guid="b590667b-523f-48e4-9420-73e5a1775aba" action="extractData" useFieldsInCommand="false">
                            <command>
                                <body>Device:[device_info]</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.execution.builtin.exec.ExtractDataPropertyGroup">
                                <tag inherit="false">Device</tag>
                                <value inherit="false">[device_info]</value>
                            </applicationProperties>
                        </item>
                        <item guid="9ad0c4f0-5a79-4ee4-b96b-a747878dd42c" action="extractData" useFieldsInCommand="false">
                            <command>
                                <body>Video_Format:[video_format_info]</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.execution.builtin.exec.ExtractDataPropertyGroup">
                                <tag inherit="false">Video_Format</tag>
                                <value inherit="false">[video_format_info]</value>
                            </applicationProperties>
                        </item>
                        <item guid="5b8b47a8-77fd-442e-8cd8-f0cefc9fc19f" action="extractData" useFieldsInCommand="false">
                            <command>
                                <body>Audio_Format:[audio_format_info]</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.execution.builtin.exec.ExtractDataPropertyGroup">
                                <tag inherit="false">Audio_Format</tag>
                                <value inherit="false">[audio_format_info]</value>
                            </applicationProperties>
                        </item>
                        <item guid="371b8d61-2db9-4474-8688-8481aadcbf41" action="extractData" useFieldsInCommand="false">
                            <command>
                                <body>Bandwidth:[bandwidth_info]</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.execution.builtin.exec.ExtractDataPropertyGroup">
                                <tag inherit="false">Bandwidth</tag>
                                <value inherit="false">[bandwidth_info]</value>
                            </applicationProperties>
                        </item>
                        <item guid="d22bb18c-adfe-42d8-b942-e65df8de1bea" action="extractData" useFieldsInCommand="false">
                            <command>
                                <body>View_Port:[view_port_info]</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.execution.builtin.exec.ExtractDataPropertyGroup">
                                <tag inherit="false">View_Port</tag>
                                <value inherit="false">[view_port_info]</value>
                            </applicationProperties>
                        </item>
                        <item guid="6b9d1a1f-30cf-483b-b307-db24baff6290" action="extractData" useFieldsInCommand="false">
                            <command>
                                <body>Dropped_Frames:[dropped_frames_info]</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.execution.builtin.exec.ExtractDataPropertyGroup">
                                <tag inherit="false">Dropped_Frames</tag>
                                <value inherit="false">[dropped_frames_info]</value>
                            </applicationProperties>
                        </item>
                        <item guid="ee6ab35a-9f16-4426-bfff-3f6a8ccd3083" action="extractData" useFieldsInCommand="false">
                            <command>
                                <body>Actual_Played_Time:[actual_played_time_info]</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.execution.builtin.exec.ExtractDataPropertyGroup">
                                <tag inherit="false">Actual_Played_Time</tag>
                                <value inherit="false">[actual_played_time_info]</value>
                            </applicationProperties>
                        </item>
                        <item guid="022967c8-9f63-49c0-b077-f9d01eeacefe" action="extractData" useFieldsInCommand="false">
                            <command>
                                <body>Video_Expected_Duration:[total_expected_duration_info]</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.execution.builtin.exec.ExtractDataPropertyGroup">
                                <tag inherit="false">Video_Expected_Duration</tag>
                                <value inherit="false">[total_expected_duration_info]</value>
                            </applicationProperties>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="2f071fce-1778-4820-b6f9-a87bb9066121" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Add to json response</body>
                    </command>
                    <nestedSteps>
                        <item guid="5ed464f5-36ee-4b5f-a6bd-46a625dcd50d" action="json" useFieldsInCommand="false">
                            <command>
                                <body>action=&apos;createJson&apos;, documentName=&apos;response&apos;, fromFile=false, jsonString=&apos;{&quot;Video_URL&quot;:&quot;[video_url]&quot;,&quot;Dropped_Frames&quot;:&quot;[dropped_frames_info]&quot;,&quot;View_Port&quot;:&quot;[view_port_info]&quot;,&quot;Device&quot;:&quot;[device_info]&quot;,&quot;Bandwidth&quot;:&quot;[bandwidth_info]&quot;,&quot;Video_Format&quot;:&quot;[video_format_info]&quot;,&quot;Audio_Format&quot;:&quot;[audio_format_info]&quot;,&quot;Actual_Played_Time&quot;:&quot;[actual_played_time_info]&quot;,&quot;Video_Expected_Duration&quot;:&quot;[total_expected_duration_info]&quot;}&apos;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.execution.builtin.json.JsonPropertiesGroup">
                                <action inherit="false">createJson</action>
                                <jsonString inherit="false" sub="true">{&quot;Video_URL&quot;:&quot;[video_url]&quot;,&quot;Dropped_Frames&quot;:&quot;[dropped_frames_info]&quot;,&quot;View_Port&quot;:&quot;[view_port_info]&quot;,&quot;Device&quot;:&quot;[device_info]&quot;,&quot;Bandwidth&quot;:&quot;[bandwidth_info]&quot;,&quot;Video_Format&quot;:&quot;[video_format_info]&quot;,&quot;Audio_Format&quot;:&quot;[audio_format_info]&quot;,&quot;Actual_Played_Time&quot;:&quot;[actual_played_time_info]&quot;,&quot;Video_Expected_Duration&quot;:&quot;[total_expected_duration_info]&quot;}</jsonString>
                                <documentName inherit="false">response</documentName>
                            </applicationProperties>
                        </item>
                        <item guid="cfccdbbd-8055-437d-a14c-59b9b7dbb20e" action="message" useFieldsInCommand="false">
                            <command>
                                <body>OK:Successfully grabbed the required data</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.execution.builtin.exec.MessagePropertyGroup">
                                <severity inherit="false">OK</severity>
                                <message inherit="false">Successfully grabbed the required data</message>
                            </applicationProperties>
                        </item>
                        <item guid="86132711-d7ac-49ca-ab54-4764a833b78b" action="return">
                            <command>
                                <body>[response]</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <arguments>
                <item name="video_url">
                    <isMandatory>true</isMandatory>
                </item>
                <item name="fresh_start"/>
            </arguments>
            <response>{&quot;Video_URL&quot;:&quot;&quot;,&quot;Actual_Played_Time&quot;:&quot;&quot;,&quot;Total_Expected_Duration&quot;:&quot;&quot;,&quot;Device&quot;:&quot;&quot;,&quot;Video_Format&quot;:&quot;&quot;,&quot;Audio_Format&quot;:&quot;&quot;,&quot;Bandwidth&quot;:&quot;&quot;,&quot;View_Port&quot;:&quot;&quot;,&quot;Dropped_Frames&quot;:&quot;&quot;}</response>
        </item>
        <item name="wait_time_for_bandwidth" isPublic="true">
            <steps>
                <item guid="4e1c0b41-3971-4950-85d0-fa17a1552345" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>from datetime import datetime, timedelta</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="7c896d70-2c87-4b66-9065-84783f107c6b" action="call" useFieldsInCommand="false">
                    <command>
                        <body>convert_to_datetime_object(time_str=total_duration)</body>
                    </command>
                    <postProcessing>
                        <storeResponseAt>total_time_obj</storeResponseAt>
                        <storeResponseText>true</storeResponseText>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="54d3fd79-a869-4cfa-98db-48183974087d" action="call" useFieldsInCommand="false">
                    <command>
                        <body>convert_to_datetime_object(time_str=actual_played_duration)</body>
                    </command>
                    <postProcessing>
                        <storeResponseAt>actual_time_obj</storeResponseAt>
                        <storeResponseText>true</storeResponseText>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="2e64b9c3-dbef-4723-b629-58687dffe08b" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Check how much time the video has read ahead of time</body>
                    </command>
                    <nestedSteps>
                        <item guid="792e07e4-22be-4e49-b4b0-a9a3b05bc113" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>readahead_time = math.ceil(float(readahead.replace(&apos;s&apos;, &apos;&apos;).strip()));print(readahead_time)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="5c518d10-6311-4375-9527-e0fd54002f18" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>buffered_time_obj = actual_time_obj + timedelta(seconds=readahead_time)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="0a7009e1-f135-4bdc-a627-358ef66c0064" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>If the readhead + actual played time &gt;= total duration, no need to wait since the device has been buffered with all the video&apos;s data</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="72089d47-bce5-480e-97b4-2fc756dab3a8" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Otherwise, wait for the rest of the video&apos;s length</body>
                            </command>
                            <nestedSteps>
                                <item guid="f92d97a6-a6f4-403a-b6e0-3db32945e45c" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>time_to_wait = 0</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="68184bc6-e61c-4c1e-b09a-564e5b386b8f" action="if" useFieldsInCommand="false">
                            <command>
                                <body>buffered_time_obj &lt; total_time_obj:</body>
                            </command>
                            <nestedSteps>
                                <item guid="ae17e9b8-888c-465e-b500-b650988c8c18" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>time_to_wait = int((total_time_obj - actual_time_obj).total_seconds())</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="5b57d25d-05d7-4346-a662-330032578c02" action="return">
                            <command>
                                <body>[time_to_wait]</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <arguments>
                <item name="actual_played_duration"/>
                <item name="total_duration"/>
                <item name="readahead"/>
            </arguments>
        </item>
        <item name="convert_to_datetime_object" isPublic="true">
            <steps>
                <item guid="614d8ebd-f7e8-4cb8-9d1a-c850aa86e599" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>from datetime import datetime</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="22c15a9e-e3ee-4dc6-8804-56c62daee683" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>parts = time_str.strip().split(&quot;:&quot;)</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="094eba39-34f9-41cf-8b87-e0c5566c8f44" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>time_format = &quot;%M:%S&quot;</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="f755f08f-a5ba-412f-a235-44a120512169" action="if" useFieldsInCommand="false">
                    <command>
                        <body>len(parts) == 3:</body>
                    </command>
                    <nestedSteps>
                        <item guid="25753509-b2a4-41dd-a1be-400ecadcd2be" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>time_format = &quot;%H:%M:%S&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="cd21a4dd-0cb0-4098-85aa-10562f787949" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>time_obj = datetime.strptime(time_str, time_format);print(datetime.strftime(time_obj, time_format))</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="6e882b6f-dd81-43b1-bb13-2282b6f63eaf" action="return">
                    <command>
                        <body>[time_obj]</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <arguments>
                <item name="time_str"/>
            </arguments>
        </item>
        <item name="run_adb" isPublic="true">
            <steps>
                <item guid="566c2414-75c0-44d4-9b4b-158572e51dfb" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>import subprocess, json</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="fc67975f-a2ad-4898-806d-f968b847e68f" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>result = subprocess.check_output(f&apos;{param(&quot;ADBPath&quot;)} {command}&apos;, shell=True).decode()</body>
                    </command>
                    <eventHandlers>
                        <item name="OnInterpreterError">
                            <item actionId="DeclareExecutionIssue">
                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                    <message>{error}</message>
                                </actionProperties>
                            </item>
                            <item actionId="Eval">
                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                    <statement>result = None</statement>
                                </actionProperties>
                            </item>
                        </item>
                    </eventHandlers>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="b9b41d7e-c1b6-44b9-8988-d25c0f1a8751" action="return">
                    <command>
                        <body>[result]</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <arguments>
                <item name="command">
                    <isMandatory>true</isMandatory>
                </item>
            </arguments>
        </item>
        <item name="clean_up" isPublic="true">
            <steps>
                <item guid="fea46a83-8b07-40f4-accb-26516332af4c" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Do the screenshot, get page source for debugging and do the cleanup when there are errors in the middle of the execution</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="9a474195-04a6-4dd8-b656-048ea1ddba51" action="if" useFieldsInCommand="false">
                    <command>
                        <body>need_screenshot == &quot;true&quot;:</body>
                    </command>
                    <nestedSteps>
                        <item guid="8a592875-8761-4df5-9399-da482d8a9693" action="screenshot" session="s1" useFieldsInCommand="false">
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="75c77eab-ecab-4b18-93ef-f753081a673f" action="command" session="s1" useFieldsInCommand="false">
                            <command>
                                <body>print(driver.page_source)
</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="f9651f82-4e52-433d-adce-f5c3eb3b7191" action="terminate" session="s1">
                    <command>
                        <body>[gget(&apos;ytb_app_pkg&apos;)]</body>
                    </command>
                    <applicationProperties type="com.spirent.itest.applications.appium.properties.AppIdStepProperties">
                        <AppId>[gget(&apos;ytb_app_pkg&apos;)]</AppId>
                    </applicationProperties>
                </item>
                <item guid="f0dba55c-e860-423a-a393-a38b88f04821" action="close" session="s1" useFieldsInCommand="false">
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <arguments>
                <item name="need_screenshot">
                    <defaultValue>true</defaultValue>
                </item>
            </arguments>
        </item>
        <item name="clean_app_data" isPublic="true">
            <steps>
                <item guid="cbb3d976-141d-404e-b8c1-56b43eb1840c" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Execute clean storage command to make the fresh start of the app</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="1dab30fc-742a-4149-88a9-dfba40429db9" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>device_used = &apos;&apos;</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="3208582e-50db-42d8-aace-bbd9d84ef808" action="if" useFieldsInCommand="false">
                    <command>
                        <body>param(&quot;DeviceAndroidID&quot;) != &apos;&apos;:</body>
                    </command>
                    <nestedSteps>
                        <item guid="53d6f177-f6f1-443b-9454-87a02ac5a82f" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>device_used = f&apos;-s {param(&quot;DeviceAndroidID&quot;)} &apos;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="9154dba8-6f63-4e2d-9e7d-5a19010a7304" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>clear_storage_cmd = f&quot; {device_used} shell pm clear {gget(&apos;ytb_app_pkg&apos;)}&quot;</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="f4ea5035-9bbc-4da0-916a-dd96dde1953a" action="call" useFieldsInCommand="false">
                    <command>
                        <body>run_adb(command=clear_storage_cmd)</body>
                    </command>
                    <postProcessing>
                        <storeResponseAt>result</storeResponseAt>
                        <storeResponseText>true</storeResponseText>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="4dd9018e-9670-44d9-97f6-55a3b7b66ac7" action="return">
                    <command>
                        <body>[result]</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
        </item>
        <item name="activate_youtube_app" isPublic="true">
            <steps>
                <item guid="a670fbce-a221-4a5f-aa8f-e1f3d02b5e2f" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Cannot use the Appium &apos;activate&apos; command since the Android container needs the option &apos;pct-syskeys 0&apos; to launch the app. So we need to use adb command as a workaround</body>
                    </command>
                    <nestedSteps>
                        <item guid="faf8cdb6-345b-4263-a368-dd375838e6ab" action="activate" session="s1" skip="true">
                            <command>
                                <body>[ytb_app_pkg]</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="contains">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                                <searchString>Traceback (most recent call last):</searchString>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="assert">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                <expression>value == 1</expression>
                                                <actionsWhenTrue>
                                                    <item actionId="DeclareExecutionIssue">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                            <message>Cannot launch Youtube application. Please make sure the app is installed and authenticated</message>
                                                        </actionProperties>
                                                    </item>
                                                    <item actionId="FailTest">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                    <item actionId="ExitExecution">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                </actionsWhenTrue>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.spirent.itest.applications.appium.properties.AppIdStepProperties">
                                <AppId>[ytb_app_pkg]</AppId>
                            </applicationProperties>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="54b8898f-3758-46b9-9b1d-96a06b112451" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>If you want to use &apos;mobile shell&apos; instead of running adb command through subprocess, then the Appium server must be started with the option --relaxed-security or --allow-insecure=adb_shell</body>
                    </command>
                    <nestedSteps>
                        <item guid="c29dee1b-fc59-46bd-84a1-cf4c6deca60a" action="command" session="s1" skip="true" useFieldsInCommand="false">
                            <command>
                                <body>driver.execute_script(&apos;mobile:shell&apos;, {&apos;command&apos;: &apos;monkey --pct-syskeys 0  -p com.google.android.youtube -c android.intent.category.LAUNCHER 1&apos;})</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="e6f18f2f-5395-44fb-a50b-711c362916e2" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Otherwise, execute adb command</body>
                    </command>
                    <nestedSteps>
                        <item guid="67ce5ca5-84ee-4038-a705-7c231e3be319" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>device_used = &apos;&apos;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="83fd6b64-698c-48ad-8275-78941d7b7b88" action="if" useFieldsInCommand="false">
                            <command>
                                <body>param(&quot;DeviceAndroidID&quot;) != &apos;&apos;:</body>
                            </command>
                            <nestedSteps>
                                <item guid="53d6f177-f6f1-443b-9454-87a02ac5a82f" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_used = f&apos;-s {param(&quot;DeviceAndroidID&quot;)}&apos;</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="4dedf8ed-955d-4725-9083-d23beeebec96" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>cmd = f&apos; {device_used} shell monkey --pct-syskeys 0 -p {gget(&quot;ytb_app_pkg&quot;)} -c android.intent.category.LAUNCHER 1&apos;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="020afb21-f572-4faf-ae76-022ca2a411ae" action="call" useFieldsInCommand="false">
                            <command>
                                <body>run_adb(command = cmd)</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="contains">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                                <searchString>SYS_KEYS has no physical keys but with factor</searchString>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="assert">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                <expression>value == 1</expression>
                                                <actionsWhenTrue>
                                                    <item actionId="DeclareExecutionIssue">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                            <message>Cannot launch the Youtube application</message>
                                                        </actionProperties>
                                                    </item>
                                                    <item actionId="FailTest">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                    <item actionId="ExitExecution">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                </actionsWhenTrue>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="a4c47ab8-a6b2-4295-814b-97c81912206d" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Wait until app is loaded</body>
                    </command>
                    <nestedSteps>
                        <item guid="9d3674a2-e261-4ee5-842a-cc2235d109e7" action="command" session="s1" useFieldsInCommand="false">
                            <command>
                                <body>driver.current_activity</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="contains">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                                <searchString>Shell$HomeActivity</searchString>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="assert">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                <expression>value == 0</expression>
                                                <actionsWhenFalse>
                                                    <item actionId="RepeatStep">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="5" delayBetweenRepeats="3.0"/>
                                                    </item>
                                                </actionsWhenFalse>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <eventHandlers>
                                <item name="OnRepeatStepMaxCountExceeded">
                                    <item actionId="FailTest">
                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    </item>
                                    <item actionId="ExitExecution">
                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    </item>
                                </item>
                            </eventHandlers>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="bad23ed1-23da-402e-9a15-f1d6a5b7d6ef" action="command" session="s1" useFieldsInCommand="false">
                            <command>
                                <body>time.sleep(3.0)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="bd4fcb96-4e90-46b6-8871-ff4374528e10" action="message" useFieldsInCommand="false">
                            <command>
                                <body>OK:Successfully opened the Youtube application</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.execution.builtin.exec.MessagePropertyGroup">
                                <severity inherit="false">OK</severity>
                                <message inherit="false">Successfully opened the Youtube application</message>
                            </applicationProperties>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
        </item>
    </procedures>
    <eventHandlers>
        <item name="OnFailTestAction">
            <item actionId="CallProcedure">
                <actionProperties type="com.fnfr.svt.execution.builtin.actions.CallProcedurePropertyGroup">
                    <command>clean_up()</command>
                </actionProperties>
            </item>
        </item>
    </eventHandlers>
</testCase>
